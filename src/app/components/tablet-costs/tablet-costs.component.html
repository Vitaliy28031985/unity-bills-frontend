<section>
  <h1 class="text-white text-center text-lg font-bold mt-6">
    {{ costsListTitle | capitalizeFirst }}
  </h1>

  <!-- mobile tablet -->
  <div class="tab:hidden">
    <div class="mt-14 w-full h-[350px] overflow-y-auto scrollbar-bt_col">
      <div
        *ngFor="let list of costs"
        class="flex mx-2 justify-between items-center gap-5 mb-2 pb-2 border-2 border-t-transparent border-l-transparent border-r-transparent border-b-label_col"
      >
        <div class="flex-1 min-w-0">
          <p class="mb-1 text-sm text-white font-bold">
            {{ list.title }}
          </p>

          <div class="flex items-center gap-3">
            <ng-container *ngIf="!list.isShow">
              <p class="text-[8px] text-white font-normal">
                {{ list.number ?? "" }}
              </p>
            </ng-container>

            <ng-container *ngIf="list.isShow">
              <input
                class="w-10 bg-transparent text-[8px] text-white focus:outline-none"
                type="number"
                [(ngModel)]="list.number"
              />
            </ng-container>

            <p class="text-[8px] text-white font-normal">
              {{ list.price ?? "" }}
            </p>
          </div>
        </div>

        <p class="text-[11px] text-white font-bold">
          {{ list.sum | number : "1.2-2" }}
        </p>

        <div class="flex justify-center items-center gap-2">
          <ng-container *ngIf="list.price">
            <button
              type="button"
              (click)="updateCostList(list)"
              class="text-white hover:text-label_col"
            >
              <ng-container *ngIf="!list.isShow; else saveIcon">
                <svg class="size-3" aria-hidden="true" focusable="false">
                  <use href="#icon-pencil"></use>
                </svg>
              </ng-container>

              <ng-template #saveIcon>
                <svg class="size-3">
                  <use href="#icon-floppy-disk"></use>
                </svg>
              </ng-template>
            </button>
            <button
              type="button"
              (click)="openDeleteModal(list.id, list.title)"
              class="text-red-600 hover:text-label_col"
            >
              <svg class="size-3">
                <use href="#icon-bin"></use>
              </svg>
            </button>
          </ng-container>
        </div>
      </div>

      <div
        class="flex bg-btGradient text-white font-extrabold px-3 justify-between items-center gap-5 mb-2 pb-2"
      >
        <div class="flex-1 min-w-0">Разом:</div>

        <div class="flex justify-center items-center gap-2">
          {{ costsListSum | number : "1.2-2" }}
        </div>
      </div>

      <button
        class="px-3 py-2 mt-7 border-2 border-white text-white hover:bg-text_col rounded-[16px] hover:shadow-bt_shadow"
        type="button"
        (click)="toggle()"
      >
        Додати
      </button>
    </div>
    <ng-container *ngIf="isShowAdd">
      <app-create-costs
        (create)="createCost($event)"
        (toggleAdd)="toggle()"
      ></app-create-costs>
    </ng-container>
  </div>

  <!-- desktop tablet -->
  <div class="mob:hidden tab:flex justify-center mt-10">
    <div>
      <div class="relative tab:w-[664px] desk:w-[746px]">
        <div
          class="tab:w-[664px] desk:w-[746px] mt-10 bg-formGradient rounded-tl-[16px] rounded-tr-[16px] mx-auto shadow-form_shadow"
        >
          <div class="flex items-center py-1">
            <div
              class="tab:w-[190px] desk:w-[221px] mx-3 text-sx text-white font-bold"
            >
              НАЗВА
            </div>
            <div
              class="tab:w-[116px] desk:w-[136px] text-center text-sx text-white font-bold"
            >
              КІЛЬКІСТЬ
            </div>
            <div
              class="tab:w-[156px] desk:w-[179px] text-center text-sx text-white font-bold"
            >
              ЦІНА
            </div>
            <div
              class="tab:w-[105px] desk:w-[105px] text-center text-sx text-white font-bold"
            >
              СУМА
            </div>
            <div class="tab:w-[105px] desk:w-[105px]"></div>
          </div>

          <div
            *ngFor="let list of costs"
            class="flex items-center py-1 mx-[2px] mb-[2px] bg-white shadow-shadow_menu"
          >
            <div class="tab:w-[190px] desk:w-[221px] mx-3 text-sx text-text_op">
              {{ list.title }}
            </div>
            <div
              class="tab:w-[116px] desk:w-[136px] text-center text-sx text-text_op"
            >
              <ng-container *ngIf="!list.isShow">
                <p>{{ list.number ? list.number : "" }}</p>
              </ng-container>

              <ng-container *ngIf="list.isShow">
                <input
                  class="tab:w-[105px] desk:w-[105px] focus:outline-none"
                  type="number"
                  [(ngModel)]="list.number"
                />
              </ng-container>
            </div>
            <div
              class="tab:w-[156px] desk:w-[179px] text-center text-sx text-text_op"
            >
              {{ list.price ? list.price : "" }}
            </div>
            <div
              class="tab:w-[105px] desk:w-[105px] text-center text-sx text-text_op"
            >
              {{ list.sum | number : "1.2-2" }}
            </div>
            <div class="flex items-center gap-2 mr-2">
              <ng-container *ngIf="list.price">
                <button
                  type="button"
                  (click)="updateCostList(list)"
                  class="text-green-950 border-2 border-green-950 p-2 rounded-full hover:text-white hover:bg-green-950"
                >
                  <ng-container *ngIf="!list.isShow; else saveIcon">
                    <svg class="size-3" aria-hidden="true" focusable="false">
                      <use href="#icon-pencil"></use>
                    </svg>
                  </ng-container>

                  <ng-template #saveIcon>
                    <svg class="size-3">
                      <use href="#icon-floppy-disk"></use>
                    </svg>
                  </ng-template>
                </button>
                <button
                  type="button"
                  (click)="openDeleteModal(list.id, list.title)"
                  class="text-green-950 border-2 border-green-950 p-2 rounded-full hover:text-white hover:bg-green-950"
                >
                  <svg class="size-3">
                    <use href="#icon-bin"></use>
                  </svg>
                </button>
              </ng-container>
            </div>
          </div>
          <div *ngIf="isShowAdd">
            <app-create-costs (create)="createCost($event)"></app-create-costs>
          </div>
          <div class="flex items-center py-1">
            <div
              class="tab:w-[190px] desk:w-[221px] mx-3 text-sx text-white font-bold"
            ></div>
            <div
              class="tab:w-[116px] desk:w-[136px] text-center text-sx text-white font-bold"
            ></div>
            <div
              class="tab:w-[156px] desk:w-[179px] text-center text-sx text-white font-bold"
            >
              Разом:
            </div>
            <div
              class="tab:w-[105px] desk:w-[105px] text-center text-sx text-white font-bold"
            >
              {{ costsListSum | number : "1.2-2" }}
            </div>
            <div class="tab:w-[105px] desk:w-[105px]"></div>
          </div>
        </div>
        <button
          (click)="toggle()"
          class="px-3 py-2 mt-3 border-2 border-white text-white hover:bg-text_col rounded-[16px] hover:shadow-bt_shadow"
          type="button"
        >
          <ng-container *ngIf="!isShowAdd">
            <p>Додати</p>
          </ng-container>
          <ng-container *ngIf="isShowAdd">
            <p>Відмінити</p>
          </ng-container>
        </button>
      </div>
    </div>
  </div>

  <!-- allow menu -->
  <div class="flex items-center justify-center">
    <div class="w-full tab:mx-9 desk:mx-[246px]">
      <button
        class="block px-3 py-2 mt-7 border-2 border-white text-white hover:bg-text_col rounded-[16px] hover:shadow-bt_shadow"
        type="button"
        (click)="toggleAllow()"
      >
        <ng-container *ngIf="isShowAllow">Закрити</ng-container>
        <ng-container *ngIf="!isShowAllow">Доступ</ng-container>
      </button>

      <ng-container *ngIf="isShowAllow">
        <app-allow-menu
          [listId]="listId"
          (toggleAllow)="toggleAllow()"
        ></app-allow-menu>
      </ng-container>
    </div>
  </div>
</section>

<app-delete-modal
  [visible]="isDeleteModalVisible"
  [itemId]="idToDelete"
  [title]="titleToDelete"
  (confirmDelete)="deleteCost($event)"
  (cancel)="closeDeleteModal()"
></app-delete-modal>
